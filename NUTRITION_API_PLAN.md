# üçé –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Nutrition API

## üéØ –¶–µ–ª—å
–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ nutrition API (USDA FoodData Central, Edamam, Spoonacular) –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö.

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ (AI-based)

### ‚úÖ –ß—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å —Å–µ–π—á–∞—Å:
- AI –∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ –∏ —Ç–µ–∫—Å—Ç–∞ —Å GPT-5
- –û—Ü–µ–Ω–∫–∞ –∫–∞–ª–æ—Ä–∏–π, –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤, –∫–ª–µ—Ç—á–∞—Ç–∫–∏
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ü–µ–ª–µ–π
- **–ù–û–í–û–ï**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- **–ù–û–í–û–ï**: –û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ—Ä—Ü–∏–π –≤ –≥—Ä–∞–º–º–∞—Ö –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ
- **–ù–û–í–û–ï**: –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ä—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–∏–∑ —Å–µ–π—á–∞—Å:
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –§–æ—Ç–æ/—Ç–µ–∫—Å—Ç
2. AI ‚Üí –ê–Ω–∞–ª–∏–∑ + –Ω–∞–∑–≤–∞–Ω–∏–µ + —Ä–∞–∑–º–µ—Ä –ø–æ—Ä—Ü–∏–∏
3. –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí "Grilled Chicken Breast, 150g (palm-sized)"
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Üí –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
```

## üöÄ –ë—É–¥—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ (API + AI hybrid)

### üìã –≠—Ç–∞–ø—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

#### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö** ‚úÖ (–≥–æ—Ç–æ–≤–æ)
- [x] –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- [x] –†–∞–∑–º–µ—Ä—ã –ø–æ—Ä—Ü–∏–π –≤ –≥—Ä–∞–º–º–∞—Ö  
- [x] –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ—Ä—Ü–∏–π
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### **–≠—Ç–∞–ø 2: API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (–±—É–¥—É—â–µ–µ)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å USDA FoodData Central API
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- [ ] –ú–∞–ø–ø–∏–Ω–≥ AI –Ω–∞–∑–≤–∞–Ω–∏–π –Ω–∞ API –ø—Ä–æ–¥—É–∫—Ç—ã
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö

#### **–≠—Ç–∞–ø 3: –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (–±—É–¥—É—â–µ–µ)
- [ ] AI –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ–¥—É–∫—Ç + —Ä–∞–∑–º–µ—Ä –ø–æ—Ä—Ü–∏–∏
- [ ] API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–∏—Ç–∞–Ω–∏–∏
- [ ] –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### üìã –¢–µ–∫—É—â–∏–µ –ø–æ–ª—è –≤ `entries`:
```sql
-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –ø–∏—Ç–∞–Ω–∏—è (–µ—Å—Ç—å)
calories INTEGER,
protein_g NUMERIC,
fat_g NUMERIC,
carbs_g NUMERIC,
fiber_g NUMERIC,

-- –ù–û–í–´–ï –ø–æ–ª—è –¥–ª—è –ø–æ—Ä—Ü–∏–π (–¥–æ–±–∞–≤–ª–µ–Ω—ã)
food_name VARCHAR(100),           -- "Grilled Chicken Breast"
portion_size VARCHAR(50),         -- "150g" –∏–ª–∏ "1 medium"
portion_description VARCHAR(100), -- "palm-sized piece"
```

### üîÆ –ë—É–¥—É—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è API:
```sql
-- –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–±—É–¥—É—â–µ–µ)
CREATE TABLE food_database (
  id UUID PRIMARY KEY,
  api_food_id VARCHAR(50),        -- ID –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ API
  standardized_name VARCHAR(100), -- "Chicken Breast, Grilled"
  api_source VARCHAR(20),         -- "usda", "edamam"
  calories_per_100g INTEGER,
  protein_per_100g NUMERIC,
  fat_per_100g NUMERIC,
  carbs_per_100g NUMERIC,
  fiber_per_100g NUMERIC,
  last_updated TIMESTAMP
);

-- –¢–∞–±–ª–∏—Ü–∞ –º–∞–ø–ø–∏–Ω–≥–∞ AI ‚Üí API (–±—É–¥—É—â–µ–µ)  
CREATE TABLE food_mapping (
  id UUID PRIMARY KEY,
  ai_food_name VARCHAR(100),      -- –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç AI
  api_food_id VARCHAR(50),        -- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π API ID
  confidence_score NUMERIC,       -- –¢–æ—á–Ω–æ—Å—Ç—å –º–∞–ø–ø–∏–Ω–≥–∞
  created_at TIMESTAMP
);
```

## üîß API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø–ª–∞–Ω)

### **1. USDA FoodData Central API**
```javascript
// –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
const searchFood = async (foodName) => {
  const response = await fetch(
    `https://api.nal.usda.gov/fdc/v1/foods/search?query=${foodName}&api_key=${API_KEY}`
  );
  return response.json();
};

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
const getFoodDetails = async (fdcId) => {
  const response = await fetch(
    `https://api.nal.usda.gov/fdc/v1/food/${fdcId}?api_key=${API_KEY}`
  );
  return response.json();
};
```

### **2. –ì–∏–±—Ä–∏–¥–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–±—É–¥—É—â–µ–µ)**
```javascript
async function hybridFoodAnalysis(photo, text, userContext) {
  // 1. AI –∞–Ω–∞–ª–∏–∑ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞ –∏ –ø–æ—Ä—Ü–∏–∏
  const aiResult = await analyzeWithAI(photo, text, userContext);
  
  // 2. –ü–æ–∏—Å–∫ –≤ API –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—é
  const apiData = await searchNutritionAPI(aiResult.food_name);
  
  // 3. –†–∞—Å—á–µ—Ç –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ API –¥–∞–Ω–Ω—ã—Ö –∏ AI –ø–æ—Ä—Ü–∏–∏
  const preciseNutrition = calculateFromAPI(apiData, aiResult.portion_size);
  
  // 4. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  return {
    ...preciseNutrition,
    portion_info: aiResult.portion_info,
    confidence: aiResult.confidence * apiData.match_confidence
  };
}
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

### **–¢–µ–∫—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
‚úÖ **–õ—É—á—à–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è AI**: —Ä–∞–∑–º–µ—Ä—ã –ø–æ—Ä—Ü–∏–π –ø–æ–º–æ–≥–∞—é—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–µ
‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏  
‚úÖ **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ—Ä—Ü–∏–π
‚úÖ **–ë–∞–∑–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**: –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –ø–æ—Ä—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **–ë—É–¥—É—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
üîÆ **–¢–æ—á–Ω–æ—Å—Ç—å –ø–∏—Ç–∞–Ω–∏—è**: API –¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ AI –æ—Ü–µ–Ω–æ–∫
üîÆ **–ë–æ–ª—å—à–∞—è –±–∞–∑–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**: –º–∏–ª–ª–∏–æ–Ω—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏–∑ USDA
üîÆ **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**: –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
üîÆ **–£–º–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è**: "–í—ã —á–∞—Å—Ç–æ –µ–¥–∏—Ç–µ –∫—É—Ä–∏—Ü—É, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä—ã–±—É"

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### **–°–µ–π—á–∞—Å (–≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é):**
1. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É `entries` (–∑–∞–ø—É—Å—Ç–∏—Ç—å `entries_update.sql`)
2. ‚úÖ AI —Ç–µ–ø–µ—Ä—å –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –ø–æ—Ä—Ü–∏–π
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ä—Ü–∏—è—Ö
4. ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–í –±—É–¥—É—â–µ–º:**
1. üîÆ –í—ã–±—Ä–∞—Ç—å nutrition API (USDA –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
2. üîÆ –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∞–ø–ø–∏–Ω–≥–∞ AI ‚Üí API
3. üîÆ –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
4. üîÆ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –∞–Ω–∞–ª–∏–∑

## üí° –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ API

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —É–∂–µ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ª—é–±—ã–º nutrition API –±–ª–∞–≥–æ–¥–∞—Ä—è:
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏—è–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –¢–æ—á–Ω—ã–º –æ—Ü–µ–Ω–∫–∞–º —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–æ—Ä—Ü–∏–π
- –ì–∏–±–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö
- –ú–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∫–æ–¥–∞

**–ö–æ–≥–¥–∞ –±—É–¥–µ–º –≥–æ—Ç–æ–≤—ã –∫ API - –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏–º –Ω–æ–≤—ã–π —Å–ª–æ–π –ø–æ–≤–µ—Ä—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã!** üéØ
